ISTRUZIONI PER L'INSTALLAZIONE SU SERVER UBUNTU

INSTALLARE APACHE2 (*opzionale)

sudo apt install apache2

VERIFICARE INDIRIZZO IP DEL PROPRIO PC/SERVER

hostname -I

IMPOSTAZIONI FIREWALL

sudo ufw app list
sudo ufw allow 'Apache'
sudo ufw status

VERIFICARE LO STATO DI APACHE

sudo systemctl status apache2

VERIFICARE FUNZIONAMENTO APACHE

http://your_server_ip

COMANDI DI APACHE
sudo systemctl stop apache2
sudo systemctl start apache2
sudo systemctl restart apache2
sudo systemctl reload apache2

INSTALLARE POSTGRESQL+POSTGIS

sudo apt && sudo apt upgrade
sudo apt install postgis
sudo passwd postgres
sudo -u postgres createdb test_data
sudo -u postgres psql
ALTER USER postgres PASSWORD ''
sudo nano /etc/postgresql/10/main postgresql.conf
MODIFICARE LISTEN ADDRESSESS -> ELEIMINARE IL # E INSERIRE '*'
sudo nano /etc/postgresql/10/main pg_hba.conf
SOTTO IPV4 INSERIRE L'IP DELLE CONNESSIONI IN ENTRATA. PER PERMTTERE QUALSIASI CONNESSIONE DIGITARE
host all all 0.0.0.0/0 md5
sudo service postgresql restart

INSTALLAZIONE DI DJANGO

sudo apt update

python3 -V #verificare versione python

sudo apt install python3-django

django-admin --version #testa l'installazione

INSTALLA DJANGO IN AMBIENTE VIRTUALE

sudo apt install python3-pip #pacchetto pip
sudo apt install python3-venv #pacchetto venv

#creare una directory per opsitare i progetti

mkdir ~/django_project
cd ~/django_project

python3.6 -m venv my_env #crea un'ambiente virtuale (my_env) all'interno della cartella
source my_env/bin/activate #attiva l'ambiente virtuale (nel prompt compare (my_env)

(my_env) $ pip install django
(my_env) $ django-admin --version
(my_env) $ deactivate #per disattivare l'ambiente virtuale

#creare un progetto di esempio
(my_env) $ django-admin startproject djangoapp . #importante il punto finale

#migrazione django funziona definendo dei modelli. Per applicare le modifiche apportate ai modelli bisogna effettura la migrazione verso il database di riferimento che Ã¨ sqlite di default
(my_env) $ pyhton manage.py migrate

(my_env) $ python manage.py createsuperuser #crea un super user

(my_env) $ nano /django_project/djangoapp/settings.py
ALLOWED_HOSTS = ['your_server_ip_or_domain', 'your_second_ip_or_domain', . . .]

#testign del server
(my_env) $ sudo ufw allow 8000
(my_env) $ python manage.py runserver 192.x.x.x:8000

http://192.x.x.x:8000

#interfaccia amministratore hhtp://192.x.x.x:8000/admin/

